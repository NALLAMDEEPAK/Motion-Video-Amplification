<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MAV - Motion Amplification{% endblock %}</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
    {% block styles %}{% endblock %}
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 4L36 12V28L20 36L4 28V12L20 4Z" stroke="url(#grad1)" stroke-width="2" fill="none"/>
                            <path d="M20 12L28 16V24L20 28L12 24V16L20 12Z" fill="url(#grad1)"/>
                            <defs>
                                <linearGradient id="grad1" x1="4" y1="4" x2="36" y2="36">
                                    <stop offset="0%" stop-color="#00d4ff"/>
                                    <stop offset="100%" stop-color="#a855f7"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <span class="logo-text">MAV</span>
                </a>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <a href="{{ url_for('video.ovsa') }}" class="nav-item primary">
                        <i class="fas fa-play-circle"></i>
                        <span>Video Comparison</span>
                        <span class="nav-badge">Live</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">
                        <i class="fas fa-wave-square"></i>
                        <span>Time Waveforms</span>
                    </div>
                    <div class="nav-dropdown">
                        <form action="{{ url_for('analysis.timex') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot cyan"></span>
                                Displacement X vs Time
                            </button>
                        </form>
                        <form action="{{ url_for('analysis.timey') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot orange"></span>
                                Displacement Y vs Time
                            </button>
                        </form>
                        <form action="{{ url_for('analysis.timem') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot purple"></span>
                                Magnitude vs Time
                            </button>
                        </form>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">
                        <i class="fas fa-chart-line"></i>
                        <span>FFT Analysis</span>
                    </div>
                    <div class="nav-dropdown">
                        <form action="{{ url_for('analysis.fftx') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot cyan"></span>
                                FFT - Displacement X
                            </button>
                        </form>
                        <form action="{{ url_for('analysis.ffty') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot orange"></span>
                                FFT - Displacement Y
                            </button>
                        </form>
                        <form action="{{ url_for('analysis.fftm') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot purple"></span>
                                FFT - Magnitude
                            </button>
                        </form>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">
                        <i class="fas fa-layer-group"></i>
                        <span>Modal Analysis</span>
                    </div>
                    <div class="nav-dropdown">
                        <form action="{{ url_for('analysis.mode') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot cyan"></span>
                                Mode Shapes
                            </button>
                        </form>
                        <form action="{{ url_for('analysis.psd') }}" method="post" enctype="multipart/form-data">
                            <button type="submit" class="nav-item">
                                <span class="nav-dot orange"></span>
                                Power Spectral Density
                            </button>
                        </form>
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="precision-badge">
                    <span class="precision-value">96%</span>
                    <span class="precision-label">Detection Precision</span>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="topbar">
                <div class="topbar-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title">{% block page_title %}Analysis{% endblock %}</h1>
                </div>
                <div class="topbar-right">
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span>System Ready</span>
                    </div>
                </div>
            </header>

            <div class="content-area">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    <script>
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.querySelector('.sidebar');
        
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        document.querySelectorAll('.nav-section-title').forEach(title => {
            title.addEventListener('click', () => {
                const section = title.parentElement;
                section.classList.toggle('collapsed');
            });
        });
    </script>
</body>
</html>
